if(window.location.href!="https://www-dev2.ni.com/shop/s/"){var environment=HOST_ENVIROMENT(location.hostname);const SFDC_URLS={dev:"https://natinst--dev2.my.salesforce.com",test:"https://natinst--test2.my.salesforce.com",prod:"https://natinst.my.salesforce.com"};const SFDC_RESOURCE_URLS={dev:"https://dev2-natinst.cs219.force.com/resource",test:"https://test2-natinst.cs219.force.com/resource",prod:"https://natinst.force.com/resource"};const SFDC_COMMUNITY_URLS={dev:"https://dev2-natinst.cs219.force.com/nichatbot",test:"https://test2-natinst.cs219.force.com/nichatbot",prod:"https://natinst.force.com/nichatbot"};const SFDC_EMBEDDED_IDS={dev:"00D8G0000004djK",test:"00D8G0000004fHW",prod:"00Di0000000jTAB"};const SFDC_BASE_LIVE_AGENT_CONTENT_URLS={dev:"https://c.la5-c1cs-ia4.salesforceliveagent.com/content",test:"https://c.la5-c1cs-ia4.salesforceliveagent.com/content",prod:"https://c.la1-c1-ia4.salesforceliveagent.com/content"};const SFDC_BASE_LIVE_AGENT_URLS={dev:"https://d.la5-c1cs-ia4.salesforceliveagent.com/chat",test:"https://d.la5-c1cs-ia4.salesforceliveagent.com/chat",prod:"https://d.la1-c1-ia4.salesforceliveagent.com/chat"};const SFDC_EMBEDDED_SERVICE_SOURCE_URLS={dev:"https://natinst--dev2.my.salesforce.com/embeddedservice/5.0/esw.min.js",test:"https://natinst--test2.my.salesforce.com/embeddedservice/5.0/esw.min.js",prod:"https://natinst.my.salesforce.com/embeddedservice/5.0/esw.min.js"};const SFDC_INSTANCE_BASE_URLS={dev:"https://dev2-ni.cs219.force.com",test:"https://test2-ni.cs219.force.com",prod:"https://ni.secure.force.com"};const CHAT_COOKIE_NAME={dev:"chatBotOption_dev",test:"chatBotOption_test",prod:"chatBotOption"};const NIUA_KEY="f9dfab7b-3360-49c9-bf0d-0b52b01fc3da";const CSS_URLS={DG:"https://www"+environment+".ni.com/css/sfdc/NationalInstrumentDG.css",CART:"https://www"+environment+".ni.com/css/sfdc/NationalInstrumentCartBot.css"};var _lrx_profile={firstName:"",lastName:"",email:""};var NIChat={prechat:{businessEmail:""}};var niua={success:false,firstname:"",lastname:"",country:"",language:"",email:"",profileId:"",company:"",phone:{countryCode:"",areaCode:"",phoneNumber:"",extension:""},role:"",localizedName:"",communityUsername:""};var sixSenseData={company:{domain:"",name:"",region:"",country:"",state:"",city:"",industry:"",industries:"",address:"",zip:"",phone:"",annual_revenue:"",is_blacklisted:"",state_code:""},confidence:""};var get6senseData=function(){var sixSenseStorageData=JSON.parse(localStorage.getItem("_6senseCompanyDetails"));if(!sixSenseStorageData){sixSenseStorageData=JSON.parse(sessionStorage.getItem("_6senseCompanyDetails"))}if(sixSenseStorageData){var industries="";if(sixSenseStorageData.company.industry_v2 instanceof Array){sixSenseStorageData.company.industry_v2.forEach(function(industryObject){industries=industries.concat(industryObject.industry,", ")})}sixSenseData.company=sixSenseStorageData.company;sixSenseData.company.industries=industries;sixSenseData.scores=sixSenseStorageData.scores;sixSenseData.segments=sixSenseStorageData.segments;sixSenseData.confidence=sixSenseStorageData.confidence}return sixSenseData};var getNIUAData=function(){var promise=new Promise(function(resolve,reject){chatbotNIUA.getDetails().then(function(data){niua.success=data.response.success;if(data.response.success){niua.firstname=data.response.firstName;niua.lastname=data.response.lastName;niua.country=data.response.country;niua.language=data.response.language;niua.email=data.response.email;niua.profileId=data.response.profileId;niua.company=data.response.company;niua.phone=data.response.phone;niua.role=data.response.role;niua.localizedName=data.response.localizedName;niua.communityUsername=data.response.communityUsername}resolve()}).catch(function(error){console.log("Error while getting NIUA data.");niua.success=false;reject()})});return promise};var SFDC_SETTINGS;if(environment==="-dev"||environment==="-dev2"){SFDC_SETTINGS="dev"}else if(environment==="-test"||environment==="-test2"){SFDC_SETTINGS="test"}else{SFDC_SETTINGS="prod"}var sfdcURL=SFDC_URLS[SFDC_SETTINGS];var sfdcCommunityURL=SFDC_COMMUNITY_URLS[SFDC_SETTINGS];var sfdcEmbeddedId=SFDC_EMBEDDED_IDS[SFDC_SETTINGS];var sfdcBaseLiveAgentContentURL=SFDC_BASE_LIVE_AGENT_CONTENT_URLS[SFDC_SETTINGS];var sfdcBaseLiveAgentURL=SFDC_BASE_LIVE_AGENT_URLS[SFDC_SETTINGS];var sfdcEmbeddedServiceSourceURL=SFDC_EMBEDDED_SERVICE_SOURCE_URLS[SFDC_SETTINGS];var sfdcInstanceBaseURL=SFDC_INSTANCE_BASE_URLS[SFDC_SETTINGS];var sfdcResourceURL=SFDC_RESOURCE_URLS[SFDC_SETTINGS];var pathnameLowerCase=window.location.pathname.toLowerCase();var chatbotNIUA=NIUA.getNIUA({apikey:NIUA_KEY});var chatbotButton;var chatbotPageLocale="";var chatHasEnded=false;var chatLoadedFromCookie=false;var botOption;var chatPageRules;var chatObj;var chat_notification;var chatCookie=CHAT_COOKIE_NAME[SFDC_SETTINGS];var chatIntervals=[];var sfdcEmbeddedDeploymentName;var sfdcDeploymentId;var sfdcButtonId;var sfdcEswLiveAgentDevName;const CHAT_RULES={cart:["/shop/cart.*","/shop/s/guest-cart.*","/shop/s/cart.*","/shop/s/checkout.*","/shop/s/orderconfirmation.*"],shipping:["/webapp/wcs/stores/servlet/ordershipping"],payment:["/webapp/wcs/stores/servlet/orderbilling"],myaccount:["^/[-a-z]+/myni/*","^/myni/*"],orderstatus:["^/status/*"],demandgen:["^/[-a-z]+/solutions/transportation*"],mmo:["^/[-a-z]+/landing/7-reasons-to-use-compactdaq-for-design-validation-test*","^/[-a-z]+/innovations/electronics/mechanical-component-and-durability-test/log-load-pressure-torque-force-and-strain-data-to-excel*","^/[-a-z]+/innovations/electronics/mechanical-component-and-durability-test/log-accelerometer-and-microphone-data-to-a-pc*","^/[-a-z]+/innovations/electronics/mechanical-component-and-durability-test/log-sensor-analog-and-digital-data-to-excel*","^/[-a-z]+/innovations/electronics/mechanical-component-and-durability-test/log-thermocouple-data-to-excel-without-programming*","^/[-a-z]+/shop/hardware/products/usb-temperature-measurement-bundle*","^/[-a-z]+/shop/hardware/products/usb-voltage-measurement-bundle*","^/[-a-z]+/shop/hardware/products/usb-sound-and-vibration-measurement-bundle*","^/[-a-z]+/shop/hardware/compactdaq-chassis-category*","^/[-a-z]+/shop/product/usb-temperature-measurement-bundle*","^/[-a-z]+/shop/product/voltage-measurement-bundle*","^/[-a-z]+/shop/product/usb-sound-and-vibration-measurement-bundle*","^/[-a-z]+/shop/category/compactdaq-chassis*","^/[-a-z]+/shop/category/voltage*","^/[-a-z]+/shop/category/temperature*","^/[-a-z]+/shop/data-acquisition-and-control/what-are-c-series-temperature-input-modules*","^/[-a-z]+/shop/data-acquisition-and-control/flexlogger*","^/[-a-z]+/innovations/electronics/mechanical-component-and-durability-test*","^/[-a-z]+/shop/category/sound-and-vibration*"]};chat_embedded_svc_functions={fill_extraPrechatInfo:function(){embedded_svc.settings.extraPrechatInfo=[{entityFieldMaps:[{doCreate:false,doFind:true,fieldName:"LastName",isExactMatch:true,label:"Last Name"},{doCreate:false,doFind:true,fieldName:"FirstName",isExactMatch:true,label:"First Name"},{doCreate:false,doFind:true,fieldName:"Email",isExactMatch:true,label:"Email"}],entityName:"Contact",saveToTranscript:"Contact",showOnCreate:true}]},fill_settings:function(){embedded_svc.settings.disabledMinimizedText="Chat offline";embedded_svc.settings.defaultMinimizedText=chatObj.ctaLabel;embedded_svc.settings.displayHelpButton=true;embedded_svc.settings.language="";embedded_svc.settings.chatbotAvatarImgURL="https://www"+environment+".ni.com/images/chat/in-chat-avatar.png";embedded_svc.settings.avatarImgURL="https://www"+environment+".ni.com/images/chat/liveAgent.png";embedded_svc.settings.enabledFeatures=["LiveAgent"];embedded_svc.settings.entryFeature="LiveAgent";embedded_svc.settings.storageDomain="ni.com";embedded_svc.settings.directToButtonRouting=function(prechatFormData){var buttonId="";buttonId=sfdcButtonId;return buttonId}},calc_prepopulated_phone:function(){let prepopulated_phone="";if(niua.phone.phoneNumber&&niua.phone.areaCode){prepopulated_phone=(niua.phone.countryCode?niua.phone.countryCode:"")+niua.phone.areaCode+niua.phone.phoneNumber}else if(niua.phone.phoneNumber&&!niua.phone.areaCode){prepopulated_phone=niua.phone.phoneNumber}else{prepopulated_phone=""}return prepopulated_phone},fill_prepopulatedPrechatFields:function(){let prepopulated_phone=chat_embedded_svc_functions.calc_prepopulated_phone();embedded_svc.settings.prepopulatedPrechatFields={Email:niua.email,FirstName:niua.firstname,LastName:niua.lastname,Phone:prepopulated_phone,Department:niua.company,ProfileId:niua.profileId}},fill_extraPrechatFormDetails:function(){embedded_svc.settings.extraPrechatFormDetails=[{label:"First Name",value:niua.firstname,transcriptFields:["FirstName__c"]},{label:"Last Name",value:niua.lastname,transcriptFields:["LastName__c"]},{label:"ChatRequestPage",value:botOption,displayToAgent:true,transcriptFields:["ChatRequestPage__c"]},{label:"Email",value:niua.email,transcriptFields:["Email__c"]},{label:"ProfileId",value:niua.profileId,displayToAgent:true,transcriptFields:["ProfileId__c"]},{label:"Country",value:niua.country,displayToAgent:true,transcriptFields:["Country__c"]},{label:"Language",value:niua.language,displayToAgent:true,transcriptFields:["Language__c"]},{label:"Company",value:niua.company,displayToAgent:true,transcriptFields:["Company__c"]},{label:"Phone Country Code",value:niua.phone.countryCode,displayToAgent:true,transcriptFields:["PhoneCountryCode__c"]},{label:"Phone Area Code",value:niua.phone.areaCode,displayToAgent:true,transcriptFields:["PhoneAreaCode__c"]},{label:"Phone Number",value:niua.phone.phoneNumber,displayToAgent:true,transcriptFields:["PhoneNumber__c"]},{label:"Phone Extension",value:niua.phone.extension,displayToAgent:true,transcriptFields:["PhoneExtension__c"]},{label:"Role",value:niua.role,displayToAgent:true,transcriptFields:["Role__c"]},{label:"Localized Name",value:niua.localizedName,displayToAgent:true,transcriptFields:["LocalizedName__c"]},{label:"Community Username",value:niua.communityUsername,displayToAgent:true,transcriptFields:["CommunityUsername__c"]},{value:sixSenseData.company.domain,displayToAgent:true,transcriptFields:["sixsense_company_domain__c"]},{value:sixSenseData.company.name,displayToAgent:true,transcriptFields:["sixsense_company_name__c"]},{value:sixSenseData.company.region,displayToAgent:true,transcriptFields:["sixsense_company_region__c"]},{value:sixSenseData.company.country,displayToAgent:true,transcriptFields:["sixsense_company_country__c"]},{value:sixSenseData.company.state,displayToAgent:true,transcriptFields:["sixsense_company_state__c"]},{value:sixSenseData.company.city,displayToAgent:true,transcriptFields:["sixsense_company_city__c"]},{value:sixSenseData.company.industry,displayToAgent:true,transcriptFields:["sixsense_company_industry__c"]},{value:sixSenseData.company.address,displayToAgent:true,transcriptFields:["sixsense_company_address__c"]},{value:sixSenseData.company.zip,displayToAgent:true,transcriptFields:["sixsense_company_zip__c"]},{value:sixSenseData.company.phone,displayToAgent:true,transcriptFields:["sixsense_company_phone__c"]},{value:sixSenseData.company.annual_revenue,displayToAgent:true,transcriptFields:["sixsense_company_annual_revenue__c"]},{value:sixSenseData.company.is_blacklisted,displayToAgent:true,transcriptFields:["sixsense_company_is_blacklisted__c"]},{value:sixSenseData.company.state_code,displayToAgent:true,transcriptFields:["sixsense_company_state_code__c"]},{value:sixSenseData.company.industries,displayToAgent:true,transcriptFields:["sixsense_company_industries__c"]},{value:sixSenseData.confidence,displayToAgent:true,transcriptFields:["sixsense_data_confidence__c"]}]}};Chat_Analytics={messageListener:function(e){if(!(e.data&&typeof e.data==="object"))return;if(chatObj.hasPrechat){if(e.data.method&&e.data.method==="liveagent.initialized"){chatHasEnded=false;NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"start chatting"});NIAnalytics.captureOutcome({eventName:"chat",eventLabel:"start chatting",eventAction:"start"});document.cookie=`${chatCookie}=${botOption};domain=.ni.com;path=/`;const dockableCont=document.getElementsByClassName("dockableContainer")[0].getElementsByClassName("sidebarHeader")[0].getElementsByTagName("h2")[0];if(dockableCont){if(dockableCont.classList.value.includes("invisibleHeader")){dockableCont.classList.remove("invisibleHeader")}}}}if(e.data.data&&typeof e.data.data==="object"){if(Object.values(e.data.data).indexOf("ESW_IS_MINIMIZED")!=-1&&!chatHasEnded){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"info form close"});if(chatObj.hasPrechat){window.dispatchEvent(new CustomEvent("prechat-cta-chat-end"))}}if(e.data.data.event){if(e.data.data.event==="transferToQueueInitiated"||e.data.data.event==="transferToButtonInitiated"){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"transferagent attempt"})}if(e.data.data.event==="chasitorAgentChatTransferred"){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"transferagent"})}if(e.data.data.event==="chasitorChatRequestSuccessful"){sessionStorage.setItem("chatbotEmail",niua.email)}if(e.data.data.event==="chasitorChasitorChatEnded"){chatHasEnded=true;NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat close"});NIAnalytics.captureOutcome({eventName:"chat",eventLabel:"chat close",eventAction:"complete",email:sessionStorage.getItem("chatbotEmail")})}if(e.data.data.event==="chatbotEndedChat"){chatHasEnded=true;NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat ended by bot"});NIAnalytics.captureOutcome({eventName:"chat",eventLabel:"chat close",eventAction:"complete",email:sessionStorage.getItem("chatbotEmail")})}if(e.data.data.event==="chasitorAgentChatEnded"){chatHasEnded=true;NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat ended by agent"});NIAnalytics.captureOutcome({eventName:"chat",eventLabel:"chat close",eventAction:"complete",email:sessionStorage.getItem("chatbotEmail")})}}if(e.data.data.params&&e.data.data.params.getContent){if(chatObj.name=="Cart"){[["Orders and shipping","Orders and shipping"],["Payment and taxes","Payment and taxes"],["Product selection","Product selection"],["Quote help","Quote help"],["Website help","Website help"],["Something else","Something else"],["Chat with an expert","Chat with an expert"],["Request offline follow-up","Request offline follow-up"]].forEach(arr=>{if(e.data.data.params.getContent===arr[0]){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:arr[1]})}})}if(chatObj.name=="MyAccount"){[["Create a new quote or order","create quote or order"],["Track or modify my order","track order"],["Manage my products and services","manage products"],["Configure my account","configure account"],["Something else","something else"]].forEach(arr=>{if(e.data.data.params.getContent===arr[0]){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:arr[1]})}})}if(chatObj.name=="DemandGen"){var emailInputs;[["Connected Cars","engagement","connected cars"],["Electric Vehicles","engagement","ev"],["Autonomous Driving","engagement","autonomous driving"],["Advanced Driver-Assistance","engagement","adas"],["Engine, Body & Chassis","engagement","engine body chassis"],["ECU Functional Test","engagement","engine body chassis:ecu"],["Hardware in the Loop (HIL)","engagement","engine body chassis:hil"],["EV Battery Test","engagement","ev:ev battery test"],["Electric Drive Test","engagement","ev:electric drive test"],["Infotainment","engagement","connected cars:infotainment"],["Telematics","engagement","connected cars:telematics"],["C-V2X Test","engagement","connected cars:c v2x test"],["I want a new quote","quote","new quote"],["I want to modify a quote","quote","modify quote"],["I need product selection help","quote","product selection"],["I have another question","quote","other"],["Yes, I'm ready","order","place order"],["I need help with my order","order","order help"],["I need product selection help","order","product selection"],["Actually, I'm ready for a quote","order","quote"],["I have a question first","order","other"],["Follow-up by phone","offline","phone"],["Follow-up by email","offline","email"],["I changed my mind","offline","none"]].forEach(arr=>{if(e.data.data.params.getContent===arr[0]){NIAnalytics.captureNavigation({eventName:"chat",eventDetail:arr[1],eventLabel:arr[2]})}});var demFormCards=[["bot_quotes_new_fieldCheck","quote","new quote:continue"],["bot_quotes_SetApplicationDetails","quote","new quote:transfer to live agent"],["bot_quotes_yesQuote_fieldCheck","quote","modify quote:submit"],["bot_sales_fieldCheck","sales","sales form:continue"],["bot_sales_applicationSubmit","sales","sales form:transfer to live agent"],["bot_orders_yesQuote_fieldCheck","order","place order:transfer to live agent"],["bot_orders_noQuote_fieldCheck","order","place order:continue"],["orders_setTopic","order","place order:transfer to live agent"],["bot_orders_help_fieldCheck","order","order help:transfer to live agent"],["bus_subscribe_validateEmail","subscribe","subscription form:submit"]];demFormCards.forEach(arr=>{if(e.data.data.params.getContent===arr[0]){emailInputs=document.getElementsByClassName("dockableContainer")[0].querySelectorAll("[inputmode='email']");NIAnalytics.captureNavigation({eventName:"chat",eventDetail:arr[1],eventLabel:arr[2],email:emailInputs[emailInputs.length-1].value})}})}}if(chatHasEnded){chatObj.deleteChatButton(10)}}},chatOpenAndStartListener:function(e){if(!chatbotButton.querySelector(".helpButtonEnabled"))return;NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat open"});chatHasEnded=false;if(chatIntervals.length>0){chatIntervals.forEach(e=>{clearInterval(e)})}switch(chatObj.hasPrechat){case true:window.dispatchEvent(new CustomEvent("prechat-cta-chat-start"));break;case false:default:NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"start chatting"});NIAnalytics.captureOutcome({eventName:"chat",eventLabel:"start chatting",eventAction:"start"});document.cookie=`${chatCookie}=${botOption};domain=.ni.com;path=/`;break}if(chatObj.chatNotification){document.cookie="cta_notif_trigger=1;path=/"}if(chatObj.hasPrechat){const header_invisible=setInterval(()=>{if(!document.getElementsByClassName("dockableContainer").length)return;if(!document.getElementsByClassName("dockableContainer")[0].getElementsByClassName("sidebarHeader").length)return;if(!document.getElementsByClassName("dockableContainer")[0].getElementsByClassName("sidebarHeader")[0].getElementsByTagName("h2").length)return;const dockableCont=document.getElementsByClassName("dockableContainer")[0].getElementsByClassName("sidebarHeader")[0].getElementsByTagName("h2")[0];if(dockableCont){dockableCont.classList.add("invisibleHeader");clearInterval(header_invisible)}},200)}}};Prechat_Analytics={preChat_ContactSales3_Start:function(e){for(prop in CS_Analytics.structure.start){if(Object.prototype.hasOwnProperty.call(CS_Analytics,prop)){CS_Analytics[prop]=CS_Analytics.structure.start[prop]}}NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"contact sales button"});NIAnalytics.captureOutcome({eventName:"contact sales",eventLabel:"contact sales button",eventAction:"start"})},preChat_ContactSales3_End:function(e){if(CS_Analytics.status=="closed")return;let eLabel;if(CS_Analytics.level<=CS_Analytics.minMenulevel)eLabel="expert option close";if(CS_Analytics.level==CS_Analytics.minMenulevel+1)eLabel=CS_Analytics.form_outlink=="form"?"screen 1 form close":"expert option close";if(CS_Analytics.level==CS_Analytics.minMenulevel+2)eLabel=CS_Analytics.form_outlink=="form"?"screen 2 form close":"expert option close";NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:eLabel});for(prop in CS_Analytics.structure.close){if(Object.prototype.hasOwnProperty.call(CS_Analytics,prop)){CS_Analytics[prop]=CS_Analytics.structure.close[prop]}}},preChatCTAClicked:function(e){var preChatButton=document.getElementById("lightning-pre-chat").getElementsByClassName("ni-pre-chat__contactSales--button")[0];if(typeof preChatButton=="undefined")return;switch(preChatButton.classList.value.includes("opened")){case true:chatTeamFunctions.log("Closing contact sales","w");const optionsPage=document.getElementById("lightning-pre-chat").getElementsByClassName("ni-pre-chat-request");const formPageOne=Array.from(document.getElementById("lightning-pre-chat").querySelectorAll(".ni-pre-chat-formpage-One.ni-pre-chat__formpage"));const formPageTwo=Array.from(document.getElementById("lightning-pre-chat").querySelectorAll(".ni-pre-chat-formpage-Two.ni-pre-chat__formpage"));if(!optionsPage.length)return;let pageOne;let pageTwo;if(formPageOne.length)pageOne=true;if(formPageTwo.length)pageTwo=true;if(formPageOne.some(item=>{return item.classList.value.includes("hidden")}))pageOne=false;if(formPageTwo.some(item=>{return item.classList.value.includes("hidden")}))pageTwo=false;if(pageOne){NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"screen 1 form close"})}else if(pageTwo){NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"screen 2 form close"})}else{NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"expert option close"})}for(prop in CS_Analytics.structure.close){if(Object.prototype.hasOwnProperty.call(CS_Analytics,prop)){CS_Analytics[prop]=CS_Analytics.structure.close[prop]}}break;case false:chatTeamFunctions.log("Opening contact sales","s");for(prop in CS_Analytics.structure.start){if(Object.prototype.hasOwnProperty.call(CS_Analytics,prop)){CS_Analytics[prop]=CS_Analytics.structure.start[prop]}}NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"contact sales button"});NIAnalytics.captureOutcome({eventName:"contact sales",eventLabel:"contact sales button",eventAction:"start"});break;default:chatTeamFunctions.log("default","e");console.error("Something went wrong during the preChatCTAClicked function. Please, check.");break}},preChatContinueClicked:function(e){var chatObj_emailElement;switch(chatObj.type){case"form":chatObj_emailElement=document.getElementById("lightning-pre-chat").querySelectorAll("[data-target-id='emailCS-01']")[0];break;case"chatbot":default:if(!document.getElementsByClassName("dockableContainer").length)return;chatObj_emailElement=document.getElementsByClassName("dockableContainer")[0].querySelectorAll("[data-target-id='emailCS-01']")[0];break}if(!chatObj_emailElement)return;NIChat.prechat.businessEmail=chatObj_emailElement.value;NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"continue button"});CS_Analytics.level+=1},preChatGoBackClicked:function(e){const preChat_flow=CS_Analytics.structure;let preChat_menuId=CS_Analytics.currentMenuId;let preChat_menuName=CS_Analytics.currentMenuName;if(!preChat_menuId)return;const preChat_option=preChat_flow[preChat_menuId]["goback"];if(!preChat_option)return;switch(preChat_menuId){case"main_menu":preChat_menuName="Main menu";NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:preChat_option.eventLabel});break;default:NIAnalytics.captureNavigation({eventName:"contact sales",eventDetail:preChat_menuName,eventLabel:preChat_option.eventLabel});break}chatTeamFunctions.log(`Contact Sales option selected: Menu: ${preChat_menuName} - Selection: ${preChat_option.eventLabel}`,"s");CS_Analytics.level-=1;if(CS_Analytics.level>=CS_Analytics.minMenulevel)return;if(preChat_option.previousId){CS_Analytics.currentMenuId=preChat_option.previousId;CS_Analytics.currentMenuName=preChat_option.previousName;CS_Analytics.form_outlink=""}},preChatSubmitClicked:function(e){let bln_MarketingOpt=document.getElementById("lightning-pre-chat").querySelectorAll("input[name='Marketing_Consent_Capture__c']")[0].checked;let str_MarketingOpt=bln_MarketingOpt?"True":"False";NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"submit button",optin:str_MarketingOpt});NIAnalytics.captureOutcome({eventName:"contact sales",eventLabel:"submit button",eventAction:"complete",email:NIChat.prechat.businessEmail});_lrx_profile.email=document.getElementById("lightning-pre-chat").querySelectorAll("input[name='Email']")[0].value;_lrx_profile.firstName=document.getElementById("lightning-pre-chat").querySelectorAll("input[name='FirstName']")[0].value;_lrx_profile.lastName=document.getElementById("lightning-pre-chat").querySelectorAll("input[name='LastName']")[0].value;_lrx_sendEvent("conversion",15950,null,JSON.stringify(_lrx_profile))},preChatInitialized:async function(e){var locale=!getCookie("locale")?"en-US":getCookie("locale");if(!niua.success)await chatObj.fill_niua();var chatDetails={locale:locale,country:niua.country,botToShow:botOption,Email:niua.email,FirstName:niua.firstname,LastName:niua.lastname,Phone:chat_embedded_svc_functions.calc_prepopulated_phone(),Department:niua.company,ProfileId:niua.profileId};const additionalPrechatData=new CustomEvent("additionalPrechatData",{detail:chatDetails});window.dispatchEvent(additionalPrechatData)},preChatMenuSelected:function(e){const preChat_flow=CS_Analytics.structure;let preChat_menuId=CS_Analytics.currentMenuId;let preChat_menuName=CS_Analytics.currentMenuName;console.log(e.detail.menuToShow);if(!e.detail.menuToShow)return;const preChat_option=preChat_flow[preChat_menuId][e.detail.menuToShow];console.log(preChat_option);if(!preChat_option)return;console.log("switch");switch(preChat_menuId){case"main_menu":preChat_menuName="Main menu";NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:preChat_option.eventLabel});break;default:NIAnalytics.captureNavigation({eventName:"contact sales",eventDetail:preChat_menuName,eventLabel:preChat_option.eventLabel});break}chatTeamFunctions.log(`Contact Sales option selected: Menu: ${preChat_menuName} - Selection: ${preChat_option.eventLabel}`,"s");CS_Analytics.level+=1;if(preChat_option.next){CS_Analytics.currentMenuId=preChat_option.next;CS_Analytics.currentMenuName=preChat_option.eventLabel}if(preChat_option.form_outlink){CS_Analytics.form_outlink=preChat_option.form_outlink}},preChatTransfer:function(e){chatTeamFunctions.log(`Contact Sales - Transfer`,"s");NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"chat transfer"});NIAnalytics.captureOutcome({eventName:"contact sales",eventLabel:"chat transfer",eventAction:"complete"});for(prop in CS_Analytics.structure.close){if(Object.prototype.hasOwnProperty.call(CS_Analytics,prop)){CS_Analytics[prop]=CS_Analytics.structure.close[prop]}}},preChatOutlink:function(e){chatTeamFunctions.log(`Contact Sales - Outlink`,"s");NIAnalytics.captureNavigation({eventName:"contact sales",eventLabel:"chat outlink"})}};CS_Analytics={currentMenuId:"",currentMenuName:"",level:0,minMenulevel:2,status:"",form_outlink:"",structure:{start:{currentMenuId:"main_menu",currentMenuName:"",level:1,status:"open",form_outlink:""},close:{currentMenuId:"",currentMenuName:"",level:0,status:"closed",form_outlink:""},main_menu:{More_info_before_ordering_menu:{eventLabel:"before order",next:"before_order"},New_or_existing_order_menu:{eventLabel:"order help",next:"order_help"},NI_product_assistance_menu:{eventLabel:"product help",next:"product_help"},Distributors_partners_rental_info_menu:{eventLabel:"partner info",next:"partner_info"}},before_order:{goback:{eventLabel:"go back",previousId:"main_menu",previousName:""},Help_selecting_products_menu:{eventLabel:"product selection",next:"",form_outlink:"form"},Pricing_and_estimated_lead_time_menu:{eventLabel:"pricing",next:"",form_outlink:"form"},Help_creating_modifying_quote_menu:{eventLabel:"modify quote",next:"",form_outlink:"form"},Need_to_retrieve_quote_menu:{eventLabel:"retrieve quote",next:"",form_outlink:"form"},Help_using_ni_menu2:{eventLabel:"site help",next:"",form_outlink:"form"}},order_help:{goback:{eventLabel:"go back",previousId:"main_menu",previousName:""},Shipping_or_payment_info_menu:{eventLabel:"shipping and payment",next:"",form_outlink:"form"},Status_of_an_order_menu:{eventLabel:"order status",next:"",form_outlink:"form"},Help_with_new_order_menu:{eventLabel:"new order",next:"",form_outlink:"form"},Modify_or_cancel_order_menu:{eventLabel:"modify order",next:"",form_outlink:"form"},Copy_of_invoice_packing_slip_W9_menu:{eventLabel:"order docs",next:"",form_outlink:"form"},Help_Using_NI_Menu:{eventLabel:"site help",next:"",form_outlink:"form"}},product_help:{goback:{eventLabel:"go back",previousId:"main_menu",previousName:""},Technical_support_product_I_own_menu:{eventLabel:"tech support",next:"",form_outlink:"outlink"},Activate_single_seat_license_menu:{eventLabel:"activate single seat",next:"",form_outlink:"form"},Activate_volume_license_menu:{eventLabel:"activate vla",next:"",form_outlink:"form"},Repair_or_calibrate_product_menu:{eventLabel:"repair calibrate",next:"",form_outlink:"outlink"},Help_software_agreement_menu:{eventLabel:"software agreement",next:"",form_outlink:"form"},Help_using_ni_menu3:{eventLabel:"site help",next:"",form_outlink:"form"}},partner_info:{goback:{eventLabel:"go back",previousId:"main_menu",previousName:"",form_outlink:"outlink"},Find_distributor_menu:{eventLabel:"find distributor",next:"",form_outlink:"outlink"},Find_partner_solution_menu:{eventLabel:"find partner",next:"",form_outlink:"outlink"},Find_rental_equipment_menu:{eventLabel:"rental equipment",next:"",form_outlink:"outlink"},Help_using_ni_menu4:{eventLabel:"site help",next:"",form_outlink:"form"}}}};window.addEventListener("prechat-cta",Prechat_Analytics.preChatCTAClicked);window.addEventListener("prechat-cta-chat-start",Prechat_Analytics.preChat_ContactSales3_Start);window.addEventListener("prechat-cta-chat-end",Prechat_Analytics.preChat_ContactSales3_End);window.addEventListener("prechat-goback",Prechat_Analytics.preChatGoBackClicked);window.addEventListener("prechat-continue",Prechat_Analytics.preChatContinueClicked);window.addEventListener("prechat-submit",Prechat_Analytics.preChatSubmitClicked);window.addEventListener("prechat-transfer",Prechat_Analytics.preChatTransfer);window.addEventListener("prechat-outlink",Prechat_Analytics.preChatOutlink);window.addEventListener("menuoptionselected",Prechat_Analytics.preChatMenuSelected);window.addEventListener("prechatInitialized",Prechat_Analytics.preChatInitialized);window.addEventListener("scroll",Chat_CTA_Scroll);class Chat{constructor(config){this.create(config);this.name=config.name;this.type="chatbot";this.CTALogo=config.CTALogo;this.hasPrechat=config.hasPrechat;this.chatNotification=config.chatNotification;this.sfdcCommunityURL=sfdcCommunityURL;this.sfdcEmbeddedDeploymentName=sfdcEmbeddedDeploymentName;this.sfdcDeploymentId=sfdcDeploymentId;this.sfdcButtonId=sfdcButtonId;this.sfdcEswLiveAgentDevName=sfdcEswLiveAgentDevName;this.chatStyleLink=config.chatStyleLink_href;this.dynamicCtaLabels;this.defaultCtaLabel="Chat with an expert";this.ctaLabel=this.defaultCtaLabel}create(config){let body=document.getElementsByTagName("body")[0];let chatStyleLink=document.createElement("link");chatStyleLink.rel="stylesheet";chatStyleLink.type="text/css";sfdcEmbeddedDeploymentName=config.sfdcEmbeddedDeploymentName;sfdcDeploymentId=config.sfdcDeploymentId;sfdcButtonId=config.sfdcButtonId;sfdcEswLiveAgentDevName=config.sfdcEswLiveAgentDevName;chatStyleLink.href=config.chatStyleLink_href;body.appendChild(chatStyleLink)}setup_events_for_delete(){["afterDestroy","onIdleTimeoutOccurred","onChatConferenceEnded","onChatEndedByChasitor","onChatEndedByAgent"].forEach(e=>{embedded_svc.addEventHandler(e,function(){chatObj.deleteChatButton(10)})})}async getCTALabel(){var response=await fetch(sfdcResourceURL+"/DynamicChatCTA");if(!response.ok){throw new Error(`HTTP Error while fetching ChatBot CTA Labels: ${response.status}`)}var json=await response.json();this.dynamicCtaLabels=json;if(!this.dynamicCtaLabels)throw new Error(`HTTP Error while fetching ChatBot CTA Labels: Empty object received`);for(let OuterProp in this.dynamicCtaLabels){if(this.metadataName&&this.contentType)break;if(chatTeamFunctions.getMeta(OuterProp)=="")continue;for(let InnerProp in this.dynamicCtaLabels[OuterProp]){if(chatTeamFunctions.getMeta(OuterProp)==InnerProp){this.ctaLabel=json[OuterProp][InnerProp];break}}}}initialize(){chatTeamFunctions.log(`Initializing ${chatObj.name} Chatbot`,"");if(!window.embedded_svc){var s=document.createElement("script");s.setAttribute("src",sfdcEmbeddedServiceSourceURL);s.onload=function(){chatObj.initESW(null)};document.body.appendChild(s)}else{chatObj.initESW("https://service.force.com")}addEventListener("message",Chat_Analytics.messageListener,false);addEventListener("click",Chat_Analytics.messageListener,false)}async initESW(gslbBaseURL,displayHelpButton){await this.getCTALabel().then(()=>{chatTeamFunctions.log("Chatbot Label fetched","s")}).catch(error=>{chatTeamFunctions.log(`Chatbot Label could not be fetched ${error}`,"w")}).finally(async()=>{chat_embedded_svc_functions.fill_extraPrechatInfo();chat_embedded_svc_functions.fill_settings();sixSenseData=get6senseData();await this.fill_niua();chatObj.startChat(gslbBaseURL)})}async fill_niua(){chatTeamFunctions.log("Grabbing NIUA data.","");await chatbotNIUA.ready().then(()=>{getNIUAData().then(()=>{niua.success?chatTeamFunctions.log("NIUA successfully received.","s"):chatTeamFunctions.log("NIUA successfully received, but it is empty.","w");chat_embedded_svc_functions.fill_prepopulatedPrechatFields();chat_embedded_svc_functions.fill_extraPrechatFormDetails()}).catch(error=>{console.log("Error while getting NIUA data.")})}).catch(error=>{console.log("Error while getting NIUA data.")})}startChat(gslbBaseURL){embedded_svc.init(sfdcURL,sfdcCommunityURL,gslbBaseURL,sfdcEmbeddedId,sfdcEmbeddedDeploymentName,{baseLiveAgentContentURL:sfdcBaseLiveAgentContentURL,deploymentId:sfdcDeploymentId,buttonId:sfdcButtonId,baseLiveAgentURL:sfdcBaseLiveAgentURL,eswLiveAgentDevName:sfdcEswLiveAgentDevName,isOfflineSupportEnabled:false})}afterInit(){chatTeamFunctions.log(`Finishing init of ${chatObj.name} Chatbot`,"");var refreshId=setInterval(()=>{chatbotButton=document.getElementsByClassName("helpButton")[0];if(!chatbotButton)return;chatbotButton.addEventListener("click",Chat_Analytics.chatOpenAndStartListener,false);if(chatObj.CTALogo)chatObj.addCTAImage();if(chatObj.chatNotification)chatObj.addNotification();if(chatLoadedFromCookie){setTimeout(()=>{if(typeof embedded_svc.liveAgentAPI.browserSessionInfo.activeChatSessions==="undefined"){if(!document.getElementsByClassName("helpButtonEnabled")[0]){chatObj.deleteChatButton(.01)}}},3500)}chatTeamFunctions.log(`Finished init of ${chatObj.name} Chatbot`,"s");clearInterval(refreshId)},500)}addCTAImage(){let element_addclass=document.getElementsByClassName("embeddedServiceIcon")[0];element_addclass.classList.add("chat-cta-before-icon")}addNotification(){let notification_loop=setInterval(()=>{if(!document.getElementsByClassName("helpButtonEnabled")[0])return;if(getCookie("cta_notif_trigger")==null){document.getElementsByClassName("helpButtonEnabled")[0].classList.add("notification");chat_notification=new Chat_Notification;document.cookie="cta_notif_trigger=1;path=/"}clearInterval(notification_loop)},3e4)}deleteChatButton(minutes){chatTeamFunctions.log(`Deleting ${chatObj.name} Chatbot Cookie`,"w");document.cookie=`${chatCookie}=; domain=.ni.com ;expires=Thu, 01 Jan 1070 00:00:01 GMT; path=/;`;if(chatLoadedFromCookie){chatTeamFunctions.log(`Deleting ${chatObj.name} Chatbot Button`,"w");var refreshId=setTimeout(function(){if(getCookie(chatCookie)==null){chatbotButton=document.getElementsByClassName("embeddedServiceHelpButton")[0];if(chatbotButton){chatbotButton.remove();clearInterval(refreshId)}}},minutes*6e4);chatIntervals.push(refreshId)}}}class MMO_Chat extends Chat{constructor(){const config={name:"MMO",CTALogo:true,chatNotification:false,hasPrechat:false,sfdcEmbeddedDeploymentName:"MMO_Chatbot",sfdcDeploymentId:"5723q000000JPvL",sfdcButtonId:"5733q000000JSmq",sfdcEswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I3q000000fxT9EAI_17e2b4bc8d6",chatStyleLink_href:CSS_URLS.DG};super(config)}}class MyAccount_Chat extends Chat{constructor(){const config={name:"MyAccount",CTALogo:true,chatNotification:false,hasPrechat:false,sfdcEmbeddedDeploymentName:"My_Account_and_Order_Status",sfdcDeploymentId:"5723q0000002cfh",sfdcButtonId:"5733q0000002g2i",sfdcEswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I0v000000Cac0EAC_178b7a7af52",chatStyleLink_href:CSS_URLS.DG};super(config)}}class Cart_Chat extends Chat{constructor(){const config={name:"Cart",CTALogo:true,chatNotification:false,hasPrechat:true,sfdcEmbeddedDeploymentName:"NI_Website_chatbot",sfdcDeploymentId:"5723q0000002cfX",sfdcButtonId:"5733q0000002g2Y",sfdcEswLiveAgentDevName:"NI_chat_team",chatStyleLink_href:CSS_URLS.CART};super(config)}}class DemandGen_Chat extends Chat{constructor(){const config={name:"DemandGen",CTALogo:true,chatNotification:true,hasPrechat:true,sfdcEmbeddedDeploymentName:"NI_Demand_Gen_Chatbot",sfdcDeploymentId:"5723q000000JPvG",sfdcButtonId:"5733q000000JSmb",sfdcEswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I3q000000fxT4EAI_17d336b0153",chatStyleLink_href:CSS_URLS.DG};sfdcCommunityURL=sfdcInstanceBaseURL+"/niDemandGen";super(config)}}class Contact_Sales{constructor(){this.name="ContactSales";this.type="form";this.dynamicCtaLabels;this.metadataName="";this.contentType="";this.create();this.fill_niua()}async create(){let body=document.getElementsByTagName("body")[0];let lightningScript=document.createElement("script");await this.getCTALabel().then(()=>{chatTeamFunctions.log("CTA Label fetched","s")}).catch(error=>{chatTeamFunctions.log(`CTA Label could not be fetched ${error}`,"w")}).finally(()=>{lightningScript.src=sfdcInstanceBaseURL+"/niDemandGen/lightning/lightning.out.js";lightningScript.onload=function(){chatObj.initPreChat()};body.appendChild(lightningScript)})}async getCTALabel(){var response=await fetch(sfdcResourceURL+"/DynamicChatCTA");if(!response.ok){throw new Error(`HTTP Error while fetching Contact Sales CTA Labels: ${response.status}`)}var json=await response.json();this.dynamicCtaLabels=json;if(!this.dynamicCtaLabels)throw new Error(`HTTP Error while fetching Contact Sales CTA Labels: Empty object received`);for(let OuterProp in this.dynamicCtaLabels){if(this.metadataName&&this.contentType)break;if(chatTeamFunctions.getMeta(OuterProp)=="")continue;for(let InnerProp in this.dynamicCtaLabels[OuterProp]){if(chatTeamFunctions.getMeta(OuterProp)==InnerProp){this.metadataName=OuterProp;this.contentType=InnerProp;break}}}}initPreChat(){chatTeamFunctions.log(`Initializing Contact Sales`,"");if(typeof $Lightning==="undefined"){console.error("Unable to load prechat widget. Lightning is undefined.")}else{chatTeamFunctions.log(this.metadataName);chatTeamFunctions.log(this.contentType);var locale=!getCookie("locale")?"en-US":getCookie("locale");var metadata_name=this.metadataName;var content_type=this.contentType;$Lightning.use("c:NF_ContactSalesContainer",function(){$Lightning.createComponent("c:NF_ContactSales_v2",{locale:locale,cta_label:"Contact_sales",metadataName:metadata_name,contentType:content_type},"lightning-pre-chat",function(cmp){})},sfdcInstanceBaseURL+"/niDemandGen")}}initPreChat_Dev(url_contactSales){if(url_contactSales==""||url_contactSales==undefined||!url_contactSales){var initPreChat_Development_Helper="_v2"}else{var initPreChat_Development_Helper=url_contactSales.toLowerCase()=="v1"||url_contactSales=="1"?"":"_v2"}if(typeof $Lightning==="undefined"){console.error("Unable to load prechat widget. Lightning is undefined.")}else{var locale=!getCookie("locale")?"en-US":getCookie("locale");$Lightning.use("c:NF_ContactSalesContainer",function(){console.log("Creating compontent: NF_ContactSales"+initPreChat_Development_Helper);$Lightning.createComponent("c:NF_ContactSales"+initPreChat_Development_Helper,{locale:locale,cta_label:"Contact_sales"},"lightning-pre-chat",function(cmp){})},sfdcInstanceBaseURL+"/niDemandGen")}}afterInit(){chatTeamFunctions.log("after Init","")}async fill_niua(){chatTeamFunctions.log("Grabbing NIUA data.","");await chatbotNIUA.ready().then(()=>{getNIUAData().then(()=>{niua.success?chatTeamFunctions.log("NIUA successfully received.","s"):chatTeamFunctions.log("NIUA successfully received, but it is empty.","w")}).catch(error=>{console.log("Error while getting NIUA data.")})}).catch(error=>{console.log("Error while getting NIUA data.")})}}class Chat_Notification{constructor(){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat notification popup"});var chatbot_notification_wrapper=document.createElement("div");var chatbot_notification_popup=document.createElement("div");var chatbot_notification_icon=document.createElement("div");var chatbot_notification_header=document.createElement("div");var chatbot_notification_body=document.createElement("div");var chatbot_notification_button_chat=document.createElement("div");var chatbot_notification_button_close=document.createElement("div");chatbot_notification_wrapper.classList.add("chatbot-notification-wrapper");chatbot_notification_popup.classList.add("chatbot-notification-popup");chatbot_notification_icon.classList.add("chatbot-notification-icon");chatbot_notification_header.classList.add("chatbot-notification-header");chatbot_notification_header.classList.add("chatbot-notification-text");chatbot_notification_body.classList.add("chatbot-notification-body");chatbot_notification_body.classList.add("chatbot-notification-text");chatbot_notification_button_chat.classList.add("notification-button");chatbot_notification_button_chat.classList.add("notification-chat-cta");chatbot_notification_button_close.classList.add("notification-button");chatbot_notification_button_close.classList.add("notification-close-cta");chatbot_notification_header.innerHTML="Hi there!";chatbot_notification_body.innerHTML="Want to learn how to accelerate your test and measurement and get to market faster? An NI expert can help you solve your application challenges on time and on budget.";chatbot_notification_button_chat.innerHTML="Let's chat";chatbot_notification_button_close.innerHTML="No, thanks";chatbot_notification_button_chat.onclick=function(){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat notification accepted"});this.innerHTML="Great!";document.getElementsByClassName("helpButtonEnabled")[0].click();document.getElementsByClassName("helpButtonEnabled")[0].classList.remove("notification");setTimeout(()=>{document.getElementsByClassName("chatbot-notification-wrapper")[0].remove()},1e3)};chatbot_notification_button_close.onclick=function(){NIAnalytics.captureNavigation({eventName:"chat",eventLabel:"chat notification rejected"});this.innerHTML="Closing...";this.removeAttribute("onclick");var chatbot_popup_original=document.getElementsByClassName("chatbot-notification-popup")[0];chatbot_popup_original.classList.add("notification-exit");var chatbot_popup_clone=chatbot_popup_original.cloneNode(true);chatbot_popup_original.parentNode.replaceChild(chatbot_popup_clone,chatbot_popup_original);document.getElementsByClassName("helpButtonEnabled")[0].classList.add("notification-exit");setTimeout(()=>{document.getElementsByClassName("helpButtonEnabled")[0].classList.remove("notification");document.getElementsByClassName("helpButtonEnabled")[0].classList.remove("notification-exit")},2350);setTimeout(()=>{document.getElementsByClassName("chatbot-notification-wrapper")[0].remove()},4500)};var helpButton_add_to=document.getElementsByClassName("embeddedServiceHelpButton")[0];chatbot_notification_popup.appendChild(chatbot_notification_icon);chatbot_notification_popup.appendChild(chatbot_notification_header);chatbot_notification_popup.appendChild(chatbot_notification_body);chatbot_notification_popup.appendChild(chatbot_notification_button_chat);chatbot_notification_popup.appendChild(chatbot_notification_button_close);chatbot_notification_wrapper.appendChild(chatbot_notification_popup);helpButton_add_to.appendChild(chatbot_notification_wrapper)}}var getCookie=function(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return null};function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Chat_CTA_Scroll(){var footer=document.getElementsByClassName("ni-wrapper-footer")[0].offsetHeight;var prechatContainer=document.getElementById("lightning-pre-chat");if(typeof prechatContainer==="undefined"){return}if(document.body.offsetHeight-footer-window.innerHeight<=window.pageYOffset){prechatContainer.style.position="absolute";prechatContainer.style.bottom=footer+50+"px"}else{prechatContainer.style.position="fixed";prechatContainer.style.bottom="var(--bottom-var)"}}var chatTeamFunctions={RuleMatch:function(array,pathname){if(array.filter(link=>{return pathname.match(link)}).length>0){return true}else{return false}},matchExact:function(r,str){var match=str.match(r);return match&&str===match[0]},log:function(str,type){if(SFDC_SETTINGS=="prod")return;let color;switch(type){case"s":color="green";break;case"e":color="red";break;case"w":color="chocolate";break;case"":color="grey";break;default:color="grey";break}console.log(`%c Chat Team message: %c ${str}`,`color:${color};border:1px solid ${color};border-radius:25px;text-align:center;padding:3px`,`color:${color}`)},getMeta:function(metaName){const metas=document.getElementsByTagName("meta");for(let i=0;i<metas.length;i++){if(metas[i].getAttribute("name")===metaName){return metas[i].getAttribute("content")}}return""}};var setupBotOption={chatBot:function(){if(chatbotPageLocale==="en-US"||chatbotPageLocale==="en-CA"){if(getCookie(chatCookie)){botOption=getCookie(chatCookie);chatLoadedFromCookie=true}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.cart,pathnameLowerCase)){botOption="cart"}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.shipping,pathnameLowerCase)){botOption="cart"}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.payment,pathnameLowerCase)){botOption="cart"}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.myaccount,pathnameLowerCase)){botOption="myaccount"}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.orderstatus,pathnameLowerCase)){botOption="myaccount"}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.demandgen,pathnameLowerCase)){botOption="demandgen"}else if(chatTeamFunctions.RuleMatch(CHAT_RULES.mmo,pathnameLowerCase)&&false){botOption="mmo"}}},contactSales:function(){chatPageRules.some(rule=>{switch(rule.type){case"wildcard":if(!pathnameLowerCase.match(rule.value))return;if(rule.exception){if(pathnameLowerCase.match(rule.exception))return;botOption="general"}else{botOption="general"}break;case"single":if(chatTeamFunctions.matchExact(rule.value,pathnameLowerCase)){botOption="general"}break;default:console.log(`No type was provided for the ${rule.value} Contact Sales rule.`)}})}};async function ContactSalesRules(){try{const response=await fetch("https://www"+environment+".ni.com/javascript/sfdc/chat_page_rules.json");if(!response.ok){throw new Error(`HTTP Error while fetching Contact Sales rules: ${response.status}`)}const json=await response.json();return json}catch(error){console.error(`Couldn't get Contact sales rules - ${error}`);return[]}}var initChat=async function(){if(document.cookie.includes("locale")){chatbotPageLocale=getCookie("locale")}setupBotOption.chatBot();if(!botOption){chatPageRules=[];const rulePromise=ContactSalesRules();await rulePromise.then(data=>chatPageRules=data);setupBotOption.contactSales()}chatTeamFunctions.log("Checks for page rules completed","s");switch(botOption){case"general":chatObj=new Contact_Sales;chatObj.afterInit();break;case"myaccount":case"orderstatus":chatObj=new MyAccount_Chat;chatObj.setup_events_for_delete();chatObj.initialize();chatObj.afterInit();break;case"cart":case"payment":case"shipping":chatObj=new Cart_Chat;chatObj.setup_events_for_delete();chatObj.initialize();chatObj.afterInit();break;case"demandgen":chatObj=new DemandGen_Chat;chatObj.setup_events_for_delete();chatObj.initialize();chatObj.afterInit();break;case"mmo":chatObj=new MMO_Chat;chatObj.setup_events_for_delete();chatObj.initialize();chatObj.afterInit();break;default:break}if(!chatObj){return}if(!chatObj.hasOwnProperty("type")){return}chatTeamFunctions.log(`Successfully identified the need for ${chatObj.name}`,"s")};initChat()}